{"version":3,"sources":["webpack:///./src/components/placeholder.js","webpack:///./src/constant.js","webpack:///./src/d3-components/bipartite.js","webpack:///./src/components/vis/company-info.js","webpack:///./src/d3-components/circle-blob.js","webpack:///./src/components/vis/comparny-distribution.js","webpack:///./src/d3-components/barchart.js","webpack:///./src/components/vis/method-ranking.js","webpack:///./src/components/vis/company-ranking.js","webpack:///./src/components/vis/autority-ranking.js","webpack:///./src/pages/index.js"],"names":["Placeholder","_ref","name","width","height","Object","core_browser_esm","style","border","display","labelConstant","one","budget","region","totalProjects","moral","doCivilProjects","globalConfig","references","mainVizPageNo","highligthColors","vizAtPage","pageTitles","purchaseMethods","BipartiteGraph","layoutData","margin","node","document","createElement","svg","d3","append","attr","flows","sources","targets","nodes","concat","container","eventSlug","p","source","target","pathContainer","on","selectAll","transition","data","enter","d","path","thickness","dispatch","detail","x","y","html","utils","moneyFormat","value","this","nodeWidth","text","m","key","match","maxX","Math","max","apply","map","n","RD3Component","rd3","Component","companies","companyProjectProfiles","filter","c","corporate_name","dairyCompanyFilter","CompanyInfo","_css2","_css3","_css4","_css5","_useState","useState","pickRandomly","orgProfile","setOrgProfile","_useState2","d3Dom","setd3Dom","windowWidthHeight","getWindowWidthHeight","scalingFactor","isMobile","layout","bipartite","padding","useEffect","projectInsights","assign","bd","id","css","company_info_ref","css_browser_esm","textAlign","media","DESKTOP_MIN_WIDTH","marginBottom","onClick","_ref2","textDecoration","tin","color","href","rel","marginLeft","_ref3","CircleBlob","maxSize","size","minSize","colorScale","domain","range","bubbleSizeScaler","xCenter","f","yCenter","lastKey","i","radius","tooltip","simulation","findColor","highlightKey","a","k","selectedProjects","methodStats","count","draw","u","select","numFormatInt","round","pageX","pageY","merge","exit","remove","centers","_","setLabels","cleanUp","stop","doSimulate","_ref$restart","restart","alpha","force","strength","category","setCircleHighlight","regionLookup","array2lookup","filterOptions","desc","CompanyDistribution","highlightCategory","setHighlightCategory","budgetM","obj","comparny_distribution_ref","background","onChange","e","comparny_distribution_RD3Component","BarChart","filterRx","getWidth","length","clsName","selector","chart_margin","xScale","yScale","label","calculateOpacity","bandwidth","delay","duration","numFormatFloat","reset","sortAttribute","totalProjectValue","sortedMethods","methodProfiles","sort","b","reverse","totalProjectValueInMillion","MethodRanking","valueKey","setValueKey","viz","setViz","purchase_method_name","marginTop","fontSize","method_ranking_RD3Component","sortedCompany","slice","CompanyRanking","ak","normalizer","fontWeight","float","console","log","company_ranking_RD3Component","authorityProfiles","AuthorityRanking","dept_name","province","autority_ranking_RD3Component","require","Index","pages_ref","seo","title","textbox","pages_ref2","variables","pages_ref3","join","_ref4","remark","section1","section2","src","section3","method_ranking","section5","placeholder","sectionEmpty","autority_ranking","company_ranking","comparny_distribution","sectonCompanyProfile","company_info","sectionConclusion","external_link","url","gatsby_browser_entry","_ref5","to","credit"],"mappings":"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","file":"component---src-pages-index-js-bec72cb996b578a1ac0e.js","sourcesContent":["import React from \"react\"\n\nconst Placeholder = ({ name, width, height }) => (\n    <div style={{\n        border: \"1px dotted black\",\n        display: \"inline-block\",\n        width: width,\n        height: height\n    }}>\n        {name}\n    </div>\n\n)\n\n\nexport default Placeholder","const labelConstant = {\n    one: [\"ภาพรวมทั้งประเทศ\"],\n    budget: [\n        \"฿200M ขึ้นไป\",\n        \"฿100M-200M\",\n        \"฿50M-100M\",\n        \"฿20M-50M\",\n    ],\n    region: [\n        \"เหนือ\",\n        \"ตะวันตก\",\n        \"ตะวันออกเฉียงเหนือ\",\n        \"ตะวันออก\",\n        \"กลาง\",\n        \"ใต้\"\n    ],\n    totalProjects: [\n        \"มากกว่า 20\",\n        \"10-20\",\n        \"5-10\",\n        \"1-5 โครงการ\",\n    ],\n    moral: [\n        \"มากกว่า 30%\",\n        \"\",\n    ],\n    doCivilProjects: [\n        \"รับโครงการด้านโยธา\",\n        \"\"\n    ]\n}\n\nconst db = {\n    url: \"/data.json\",\n    companyProfile: (tin) => `/company-profiles/${tin}.json`\n}\n\nconst globalConfig = {\n    references: [],\n    mainVizPageNo: 6,\n    highligthColors: [\n        \"#eee\",\n        \"red\"\n    ],\n    vizAtPage: [\n        \"none\",\n        \"none\",\n        \"none\",\n        \"none\",\n        \"none\",\n        \"none\",\n        \"circleBlob\",\n        \"circleBlob\",\n        \"circleBlob\",\n        \"none\",\n    ],\n    pageTitles: [\n        \"ขุมทรัพย์อปท. 7 แสนล้านบาท\",\n        \"สัดส่วนโครงการโยธา\",\n        \"มูลค่าการจัดซื้อ-จัดจ้าง\",\n        \"ที่มาเงินทอน\",\n        \"สัดส่วนรายได้ของ อปท.\",\n        \"คอนกรีต - ลูกรัง ซ่อมสร้างไม่รู้จบ\",\n        \"บริษัทที่มีขีดความสามารถในการได้งานอปท.\",\n        \"นิยามโยธา\",\n        \"คลิกดูรายภาคและรายบริษัท\",\n        \"ผู้จัดทำ\",\n    ],\n    purchaseMethods: [\n        {\n            name: 'เฉพาะเจาะจง',\n        },\n        {\n            name: 'ประกวดราคาอิเล็กทรอนิกส์ (e-bidding)',\n        },\n        {\n            name: 'ประกวดราคาด้วยวิธีการทางอิเล็กทรอนิกส์',\n        },\n        {\n            name: 'พิเศษ',\n        },\n        {\n            name: 'คัดเลือก',\n        },\n        {\n            name: 'สอบราคา',\n        },\n        {\n            name: 'จ้างที่ปรึกษาโดยวิธีคัดเลือก',\n        },\n        {\n            name: 'จ้างที่ปรึกษาโดยวิธีประกาศเชิญชวนทั่วไป',\n        },\n        {\n            name: 'จ้างที่ปรึกษาโดยวิธีเฉพาะเจาะจง',\n        },\n        {\n            name: 'ตกลงราคา',\n        },\n        {\n            name: 'ประกวดราคา',\n        },\n        {\n            name: 'กรณีพิเศษ',\n        },\n\n    ],\n}\n\nconst statistics = {\n    \"part1\": {\n        \"totalGovBudget\": 720822 * 1e6,\n        \"totalProjects\": 92137,\n        \"totalValue\": 32768 * 1e6,\n        \"totalCivilProjectValue\": 21252 * 1e6,\n        \"totalCivilProjects\": 30634,\n        \"totalOrgs\": 33225,\n    },\n    \"part4\": {\n        \"budgetPortions\": [\n            {\n                \"name\": \"รายได้ที่ อปท. จัดหาเอง\",\n                \"amount\": 112000\n            },\n            {\n                \"name\": \"รายได้ที่รัฐบาลเก็บให้และแบ่งให้\",\n                \"amount\": 229900 \n            },\n            {\n                \"name\": \"ภาษีมูลค่าเพิ่มที่รัฐบาลแบ่งให้  (ตาม พ.ร.บ. กำหนดแผนฯ)\",\n                \"amount\": 115000 \n            },\n            {\n                \"name\": \"เงินอุดหนุน\",\n                \"amount\": 263922 \n            },\n        ]\n    }\n}\n\nexport {labelConstant, db, globalConfig, statistics}","import * as d3 from 'd3'\nimport {globalConfig} from \"../constant\"\nimport utils from \"../utils\"\n\nconst BipartiteGraph = ({layoutData, width, height}) => {\n    const margin = {\n        left: 200,\n        right: 150,\n        top: 40,\n        bottom: 20\n    }\n    const node = document.createElement('div');\n    const svg = d3.select(node).append(\"svg\")\n        .attr(\"width\", width + margin.left + margin.right)\n        .attr(\"height\", height + margin.top + margin.bottom)\n\n    const { flows, sources, targets } = layoutData\n    const nodes = [].concat(sources, targets)\n    const nodeWidth = 10\n    const labelFontSize = 10\n    const pathOpacity = 0.3\n\n\n    const container = svg.append('g')\n      .attr('transform', 'translate(' + margin.left + ',' + margin.top + ')');\n    \n    // code below taken from https://observablehq.com/@ilyabo/weighted-bipartite-graph\n    // flow lines\n    const eventSlug = (p) => `${p.source}-${p.target}`\n    const pathContainer = container.append('g').attr(\"class\", \"pathContainer\")\n\n    d3.select(\"body\")\n      .append(\"div\")\n      .attr(\"class\", \"textLabel\")\n      .style(\"position\", \"absolute\")\n      .style(\"background\", \"black\")\n      .style(\"color\", \"white\")\n      .style(\"opacity\", 0)\n      .style(\"pointer-events\", \"none\")\n      .style(\"padding\", \"10px\")\n\n    pathContainer.on(\"mouseout\", () => {\n        d3.select(\".pathContainer\")\n          .selectAll(\"path\")\n          .transition()\n          .style(\"opacity\", pathOpacity)\n        d3.select(\"div.textLabel\")\n          .style(\"opacity\", 0)\n      })\n\n    pathContainer.selectAll('path')\n      .data(flows)\n      .enter().append('path')\n        .attr('d', d => d.path)\n        .attr('opacity', pathOpacity)  \n        .style(\"z-index\", 1000)\n        .attr('fill', 'none')  \n        .attr('stroke', globalConfig.highligthColors[1])\n        .attr('stroke-width', d => d.thickness)\n        .on(\"mouseover\", function(d) {\n          d3.selectAll(\"path\").dispatch(\"highlight\", {detail: eventSlug(d)})\n          d3.select(\"div.textLabel\")\n            .style(\"left\", `${d3.event.x}px`)\n            .style(\"top\", `${d3.event.y + 20}px`)\n            .style(\"opacity\", 1)\n            .html(`โครงการแบบ${d.source} ที่ทำร่วมกับอปท.ในจังหวัด${d.target} <br>รวมเป็นมูลค่า ${utils.moneyFormat(d.value)}`)\n        })\n        .on(\"highlight\", function(d) {\n          const slug = d3.event.detail\n          if(slug !== eventSlug(d)) {\n            d3.select(this)\n              .transition()\n              .style(\"opacity\", 0.1)\n          } else {\n            d3.select(this)\n              .style(\"z-index\", 10)\n              .transition()\n              .style(\"opacity\", 0.5)\n          }\n        })\n\n    // node rectangles\n    container.append('g')\n      .selectAll('rect')\n      .data(nodes)\n      .enter().append('rect')\n        .attr('x', d => d.x - nodeWidth/2)\n        .attr('y', d => d.y)\n        .attr('width', nodeWidth)\n        .attr('height', d => d.height)\n        .attr('fill', globalConfig.highligthColors[1])\n        .attr('stroke', 'none');\n\n    // source labels\n    container.append('g')\n      .selectAll('text')\n      .data(sources)\n      .enter().append('text')\n        .attr('x', -nodeWidth)\n        .attr('y', d => d.y + d.height/2)\n          .attr('font-size', labelFontSize)\n          .attr('alignment-baseline', 'middle')\n          .attr('text-anchor', 'end')\n          .text(d => {\n            const m = d.key.match(/\\((.+)\\)/)\n            const slug = m ? m[1] : d.key\n            return slug\n          });\n\n    // source value\n    container.append('g')\n      .selectAll('text')\n      .data(sources)\n      .enter().append('text')\n        .attr('x', -nodeWidth)\n        .attr('y', d => d.y + d.height/2 + labelFontSize)\n        .attr('font-size', labelFontSize)\n        .attr('alignment-baseline', 'middle')\n        .attr('text-anchor', 'end')\n        .text(d => `(${utils.moneyFormat(d.value)})`)\n\n    const maxX = Math.max(...targets.map(n => n.x))\n\n    // target labels\n    container.append('g')\n      .selectAll('text')\n      .data(targets)\n      .enter().append('text')\n        .attr('x', maxX + nodeWidth)\n        .attr('y', d => d.y + d.height/2)\n          .attr('font-size', 10)\n          .attr('alignment-baseline', 'middle')\n          .attr('text-anchor', 'start')\n          .text(d => `${d.key} (${utils.moneyFormat(d.value)})`)\n\n    return node;\n}\n\nexport default BipartiteGraph","import React, {useState, useEffect} from \"react\"\nimport rd3 from 'react-d3-library'\n\nimport bipartite from \"d3-bipartite\"\nimport BipartiteGraph from \"../../d3-components/bipartite\"\nimport { DESKTOP_MIN_WIDTH, media } from \"../../shared/style\"\n\nimport companyProjectProfiles from \"../../data/company_stats\"\nimport { dairyCompanyFilter } from \"../../shared/variables\"\n\nimport utils from \"../../utils\"\n\nconst RD3Component = rd3.Component;\n\n\nconst companies = companyProjectProfiles\n  .filter(c => !c.corporate_name.match(dairyCompanyFilter))\n\nconst CompanyInfo = () => {\n  const [orgProfile, setOrgProfile] = useState(utils.pickRandomly(companies))\n\n  const [d3Dom, setd3Dom] = useState()\n\n  const padding = 10\n\n  const windowWidthHeight = utils.getWindowWidthHeight()\n  const scalingFactor = (utils.isMobile() ? 0.3 : 0.5)\n  const width = windowWidthHeight.width * scalingFactor\n  const height = 300\n\n  const layout = bipartite() \n    .width(width)\n    .height(height)\n    .padding(padding)\n    .source(d => d.source)\n    .target(d => d.target)\n    .value(d => d.value)\n\n  useEffect(() => {\n    const data = orgProfile.projectInsights\n      .map( d => {\n        return {\n          ...d,\n          value: d.value / 1e6\n        }\n      })\n    \n    const layoutData = layout(data)\n    const bd = BipartiteGraph({\n      layoutData, width, height\n    })\n\n    setd3Dom(bd)\n  }, [orgProfile]);\n\n\n\n  // useEffect(() => {\n  //   const fetchData = async () => {\n  //     const result = await axios(db.companyProfile(tin))\n      \n  //     const org = result.data\n  //     const dd = {}\n\n  //     org.projects\n  //       .forEach(p => {\n  //         const k = `${p.purchaseMethod}::${p.province}`\n  //         if (k in dd) {\n  //           dd[k] += p.projectValue / 1e6\n  //         } else {\n  //           dd[k] = p.projectValue / 1e6\n  //         }\n  //       });\n\n  //     const connections = Object.keys(dd).map( k => {\n  //       const slugs = k.split(\"::\")\n  //       return {\n  //           source: slugs[0],\n  //           target: slugs[1],\n  //           value: dd[k]\n  //       }\n  //     })\n\n  //     setData(connections)\n  //     setOrgProfile(org)\n\n  //   };\n  //   fetchData();\n  // }, [tin])\n\n  return (\n      <div id=\"company-info\"\n        css={{\n          position: \"relative\"\n        }}\n      >\n        <div css={{\n          textAlign: \"center\",\n          [media(DESKTOP_MIN_WIDTH)]: {\n            textAlign: \"left\"\n          }\n        }}>\n          <div css={{\n            width: \"100%\",\n            marginBottom: \"10px\",\n            textAlign: \"center\",\n            [media(DESKTOP_MIN_WIDTH)]: {\n              textAlign: \"right\",\n            }\n          }} onClick={() =>{ setOrgProfile(utils.pickRandomly(companies)) }}>\n            <div css={{\n              padding: \"5px\",\n              border: \"1px solid\",\n              cursor: \"pointer\",\n              display: \"inline-block\",\n            }}>\n              สุ่มเลือกบริษัทอื่น\n            </div>\n          </div>\n          <div>\n            รายละเอียดการรับโครงการของ {` `}\n            <span css={{\n              textDecoration: \"underline\",\n              display: \"block\",\n              [media(DESKTOP_MIN_WIDTH)]: {\n                display: \"inline\"\n              }\n            }}>\n              { orgProfile.tin &&\n                <a style={{color: \"black\", textDecoration: \"none\"}}\n                  href={`https://datawarehouse.dbd.go.th/company/profile/${orgProfile.tin[3]}/${orgProfile.tin}`} target=\"_blank\" rel=\"noopener noreferrer\">\n                    {orgProfile.corporate_name}\n                </a>\n              }\n            </span>\n          </div>\n        </div>\n        <div\n          css={{\n            marginLeft: `-${width}px`,\n            [media(DESKTOP_MIN_WIDTH)]: {\n              marginLeft: 0\n            }\n          }}\n        >\n          <RD3Component data={d3Dom}/>\n        </div>\n\n        <div css={{textAlign: \"center\"}}>\n          { orgProfile.tin && <div style={{textDecoration: \"underline\", textAlign: \"center\"}}>\n            <a style={{color: \"black\", textDecoration: \"none\"}}\n               href={`https://govspending.data.go.th/budget?winner=${orgProfile.tin}`} target=\"_blank\" rel=\"noopener noreferrer\">\n                ดูโครงการทั้งหมดจาก ภาษีไปไหน?\n            </a>\n            </div>\n          }\n        </div>\n      </div>\n  )\n}\n\nexport default CompanyInfo","import * as d3 from \"d3\"\nimport {labelConstant, globalConfig} from \"../constant\"\nimport utils from \"../utils\"\n\nconst CircleBlob = (data) => {\n    const clsName = \"circleBlob\"\n    const selector = `svg.${clsName}`\n\n    const maxSize = d3.max(data, d => d.size)\n    const minSize = d3.min(data, d => d.size) \n\n\n    const colorScale = d3.scaleLinear()\n        .domain([0, 1])\n        .range(globalConfig.highligthColors)\n\n    const bubbleSizeScaler = d3.scaleLinear()\n        .domain([minSize, maxSize])\n        .range(utils.isMobile() ? [2.5, 20] : [2.5, 30])\n\n    const node = document.createElement('div');\n\n    const width = utils.isMobile() ? utils.getWindowWidthHeight().width * 0.8 : 896\n    const height = 400\n\n    const scalingFactor = utils.isMobile() ?\n        [ 0.9, 0.5, 0.1, 0.9, 0.5, 0.1] : [0.8, 0.5, 0.2, 0.8, 0.5, 0.2]\n    \n    const xCenter = {\n        one: [width*0.5],\n        region: scalingFactor.map(f => width * f),\n        doCivilProjects: [width*0.7, width*0.2],\n    }\n\n    const yCenter = {\n        region: [0.7, 0.7, 0.7, 0.3, 0.3, 0.3].map(f => height * f),\n    }\n\n    const svg = d3.select(node)\n        .append(\"svg\")\n        .attr(\"class\", clsName)\n        .attr(\"width\", width)\n        .attr(\"height\", height)\n\n    svg.append(\"g\").attr(\"class\", \"main-panel\")\n\n    const nodes = data.map( (d, i) => {\n        return {\n            ...d,\n            radius: bubbleSizeScaler(d.size),\n        }\n    });\n\n    const tooltip = d3.select(\"body\").append(\"div\")\t\n        .attr(\"class\", \"tooltip\")\t\t\t\t\n        .style(\"opacity\", 0.0)\n        .style(\"background\", \"black\")\n        .style(\"color\", \"white\")\n        .style(\"position\", \"absolute\")\n        .style(\"padding\", \"10px\")\n\n    const simulation = d3.forceSimulation(nodes)\n    const cleanUp = () => {\n        tooltip.remove()\n        simulation.stop()\n    }\n\n\n    const getKey = (a, k) => {\n        if(!a.methodStats[k]){\n          return 0\n        } else{\n          return a.methodStats[k].count\n        }\n      }\n\n    const findColor = (highlightKey, d) => {\n        const selectedProjects = getKey(d, highlightKey.name)\n\n        return colorScale(selectedProjects / d.totalProjects)\n    }\n\n    const setLabels = (key) => {\n        const centers = xCenter[key].map((d, i) => {\n            return {\n                x: d,\n                y: yCenter[key][i] + 70\n            }\n        })\n\n        const u = d3.select(selector)\n            .selectAll(\"text.label\")\n            .data(centers, d => d)\n\n            u.enter()\n                .append(\"text\")\n                .attr(\"class\", \"label\")\n                .style(\"text-anchor\", \"middle\")\n                .merge(u)\n                .attr(\"x\", d => d.x)\n                .attr(\"y\", d => d.y)\n                .style(\"font-size\", utils.isMobile() ? \"10px\": \"14px\")\n                .text((_, i) => labelConstant[key][i])\n\n            u.exit().remove()\n    }\n\n\n    const draw = (key, highlightKey) => {\n        const u = d3.select(selector).select(\"g\") \n            .selectAll('circle')\n            .data(nodes)\n\n        u.enter() \n            .append('circle')\n            .attr(\"class\", \"org\")\n            .attr('r', (d) => d.radius)\n            .style(\"pointer-events\", \"all\")\n            // .style('cursor', 'pointer')\n            .attr(\"fill\", (d) => findColor(highlightKey, d))\n            // .on(\"click\", d => { \n            //     window.open(`/org?tin=${d.tin}`, \"_blank\")\n            // })\n            .on(\"mouseover\", (d) => {\n                d3.select(\"body\").select(\"div.tooltip\")\n                    .html(`\n                    ${d.corporate_name}<br/>\n                    ได้รับงานอปท.ทั้งหมด ${d.totalProjects} โครงการ\n                    รวมมูลค่าทั้งสิ้น ${ utils.numFormatInt(Math.round(d.size)) } ล้านบาท\n                    `\n                    )\n                    .style(\"z-index\", 1000)\n                    .style(\"left\", (d3.event.pageX + 20) + \"px\")\n                    .style(\"top\", (d3.event.pageY - 28) + \"px\")\n                    .transition()\n                    .style(\"opacity\", 0.8)\n                    .style(\"display\", \"block\")\n            })\n            .on(\"mouseleave\", () => {\n                d3.select(\"body\").select(\"div.tooltip\")\n                    .transition()\n                    .style(\"opacity\", 0)\n                    .style(\"display\", \"none\")\n            })\n            .merge(u)\n            .attr('cx', d => d.x)\n            .attr('cy', d => d.y)\n\n        u.exit().remove();\n\n        setLabels(key)\n    }\n\n    let lastKey\n\n    const doSimulate = ({key, restart=false, highlightKey}) => {\n        if(lastKey !== key || restart){\n            simulation.alpha(0.8).restart()\n        }\n\n        simulation.force('charge', d3.forceManyBody().strength(1.5))\n            .force('x', d3.forceX().x(d => xCenter[key][d.category[key]]))\n            .force('y', d3.forceY().y(d => yCenter[key][d.category[key]]))\n            .force('collision', d3.forceCollide().radius(d => d.radius))\n            .on('tick', () => draw(key, highlightKey))\n\n        lastKey = key\n    }\n\n    const setCircleHighlight = (key, highlightKey) => {\n        draw(key, highlightKey)\n\n        d3.select(selector)\n            .selectAll(\"circle\")\n            .transition()\n            .attr(\"fill\", (d) => findColor(highlightKey, d))\n    }\n\n   return {node, cleanUp, doSimulate, setCircleHighlight}\n}\n\nexport default CircleBlob","import React, { useState, useEffect } from 'react'\n\nimport rd3 from 'react-d3-library'\n\nimport companyProjectProfiles from \"../../data/company_stats\"\nimport CircleBlob from '../../d3-components/circle-blob'\n\nimport utils from \"../../utils\"\n\nimport {labelConstant, globalConfig} from \"../../constant\"\n\nconst regionLookup = utils.array2lookup(labelConstant.region)\n\nconst RD3Component = rd3.Component\n\nconst filterOptions = [\n  {\n    desc: \"ภูมิภาคที่ได้รับโครงการส่วนใหญ่\",\n    key: \"region\"\n  },\n]\n\nconst CompanyDistribution = () => {\n    const [d3Dom, setd3Dom] = useState({})\n    const [highlightCategory, setHighlightCategory] = useState(0)\n\n\n    useEffect(() =>{\n        const data = companyProjectProfiles.map( (d, i) => {\n            const budgetM = d['totalProjectValue'] / 1e6\n            return {\n                ...d,\n                size: budgetM,\n                category: {\n                region: regionLookup[d['primaryRegion']],\n                }\n            }\n        })\n\n        const obj = CircleBlob(data)\n\n        setd3Dom(obj)\n    }, [])\n\n    useEffect(() => {\n        if(d3Dom.node){\n            d3Dom.doSimulate({\n                key: filterOptions[0].key,\n                highlightKey: globalConfig.purchaseMethods[highlightCategory]\n            })\n        }\n    }, [d3Dom])\n\n    useEffect(() => {\n        if(d3Dom.node){\n          d3Dom.setCircleHighlight(\n            filterOptions[0].key,\n            globalConfig.purchaseMethods[highlightCategory]\n          )\n        }\n    }, [d3Dom, highlightCategory])\n\n    return <div>\n        <div css={{ textAlign: \"center\", fontSize: \"11px\"}}>\n            เลือกไฮไลท์สีตามสัดส่วนโครงการแบบ {` `}\n            <select\n            style={{\n                border: \"0px\",\n                background: \"#eee\",\n            }}\n            value={highlightCategory}\n            onChange={(e) => {\n                setHighlightCategory(e.target.value)\n            }}\n            >\n            {\n                globalConfig.purchaseMethods.map( (m, i) => {\n                return <option key={i} value={i}>\n                    {m.name}\n                </option>\n                })\n            }\n            </select>\n        </div>\n        <RD3Component data={d3Dom.node}/>\n    </div>\n}\n\nexport default CompanyDistribution","import * as d3 from \"d3\"\nimport {globalConfig} from \"../constant\"\nimport utils from \"../utils\"\n\nconst BarChart = ({name, data, filterRx}) => {\n    const width = utils.getWidth()\n    const height = 35 * data.length\n\n    const clsName = name\n    const selector = `svg.${clsName}`\n\n    const margin = { top: 10, left: 20, bottom: 10, right: 20}\n    const chart_margin = {top: 0, left:5, bottom:10, right: 15}\n\n    const xScale = d3.scaleLinear()\n            .range([0, width-chart_margin.left-chart_margin.right])\n            .domain([0, d3.max(data, (d) => {\n                return d.value\n            })]);\n\n    const yScale = d3.scaleBand()\n            .range([height-chart_margin.top-chart_margin.bottom, 0])\n            .domain(data.map((d) => d.label))\n            .padding(0.6)\n\n    const node = document.createElement('div')\n    \n    const calculateOpacity = (d) => {\n        if(filterRx && d.label.match(filterRx)){\n            return 0.2\n        } else{\n            return 1\n        }\n    }\n\n    d3.select(node)\n        .append('svg')\n        .attr(\"class\", clsName)\n        .attr(\"width\", width + margin.left + margin.right)      \n        .attr(\"height\", height + margin.top + margin.bottom)                                                         \n        .attr(\"transform\", \"translate(\" + margin.left + \",\" + margin.top + \")\")\n\n    const display = () => {\n        // //create bar chart\n        const bar = d3.select(selector)\n            .append('g')\n            .attr(\"class\", \"bar\")    \n            .selectAll(\"rect\")\n            .data(data)\n            .enter()\n            .append(\"rect\")\n            .attr(\"width\", 0)\n            .attr(\"y\", (d) => yScale(d.label))\n            .attr(\"height\", yScale.bandwidth())\n            .attr(\"transform\", \"translate(\"+chart_margin.left+\",\" + chart_margin.top + \")\")\n\n        bar\n            .transition()\n            .delay(1000)\n            .duration(1000)\n            .attr(\"fill\", globalConfig.highligthColors[1])\n            .attr(\"width\", function(d) {return xScale(d.value)})\n            .style(\"opacity\", calculateOpacity)\n\n        d3.select(selector)\n            .append(\"g\")\n            .attr(\"class\", \"label\")\n            .selectAll(\"text\")\n            .data(data)\n            .enter()\n            .append(\"text\")\n            .attr(\"y\", (d) => yScale(d.label) - 5)\n            .text((d) => `${d.label} ${utils.numFormatFloat(d.value)}`)\n            .style(\"font-size\", utils.isMobile() ? \"8px\" : \"14px\")\n            .attr(\"transform\", \"translate(\"+chart_margin.left+\",\" + chart_margin.top + \")\")\n            .style(\"opacity\", calculateOpacity)\n    }\n\n    const reset = () => {\n        d3.select(selector)\n            .selectAll(\"g\")\n            .transition()\n            .style(\"opacity\", 0)\n            .remove()\n    }\n\n    return {node, display, reset}\n}\n\nexport default BarChart","import React, {useEffect, useState} from \"react\"\n\nimport rd3 from 'react-d3-library'\n\nimport BarChart from \"../../d3-components/barchart\"\nimport methodProfiles from \"../../data/procurement_methods_stats\"\nimport { DESKTOP_MIN_WIDTH, media } from \"../../shared/style\"\n\nconst RD3Component = rd3.Component\n\nconst sortAttribute = a => a.totalProjectValue\n\nconst sortedMethods = methodProfiles.sort((a, b) => {\n    return sortAttribute(b) - sortAttribute(a)\n  })\n  .reverse()\n  .map(a => {\n    return {\n      ...a,\n      totalProjectValueInMillion: a['totalProjectValue'] / 1e6\n    }\n  })\n\nconst MethodRanking = () => {\n    const [valueKey, setValueKey] = useState('totalProjectValueInMillion')\n\n    const [viz, setViz] = useState({})\n\n    useEffect(()=> {\n      const data = sortedMethods.map( a => {\n        return {\n          label: `${a.purchase_method_name}`,\n          value: a[valueKey]\n        }\n      })\n\n      const obj = BarChart({\n        name: 'method-ranking',\n        data,\n      })\n\n      if(viz && viz.reset){\n        viz.reset()\n      }\n\n      setViz(obj)\n    }, [valueKey])\n\n    useEffect( () => {\n      if(viz && viz.display){\n        viz.display()\n      }\n    }, [viz])\n\n    return <div>\n      <div style={{marginTop: \"0rem\"}}>\n        <div css={{\n          textAlign: \"center\",\n          fontSize: \"11px\",\n          [media(DESKTOP_MIN_WIDTH)] : {\n            textAlign: \"right\",\n          }\n        }}>หน่วย: <select\n            style={{\n                border: \"0px\",\n                background: \"#eee\",\n            }}\n            value={valueKey}\n            onChange={(e) => {\n              setValueKey(e.target.value)\n            }}\n          >\n            <option value=\"totalProjects\">จำนวนโครงการทั้งหมด</option>\n            <option value=\"totalProjectValueInMillion\">มูลค่าโครงการรวม​ (ล้านบาท)</option>\n          </select>\n        </div>\n        <RD3Component data={viz.node}/>\n      </div>\n    </div>\n}\n\nexport default MethodRanking","import React, {useEffect, useState} from \"react\"\n\nimport rd3 from 'react-d3-library'\n\nimport BarChart from \"../../d3-components/barchart\"\nimport companyProjectProfiles from \"../../data/company_stats\"\nimport { DESKTOP_MIN_WIDTH, media } from \"../../shared/style\"\n\nimport { dairyCompanyFilter } from \"../../shared/variables\"\n\nconst RD3Component = rd3.Component\n\nconst methodSortKey = 'เฉพาะเจาะจง'\n\nconst sortAttribute = a => {\n  if(!a.methodStats[methodSortKey]){\n    return 0\n  } else{\n    return a.methodStats[methodSortKey].count\n  }\n}\n\n\nconst sortedCompany = companyProjectProfiles.sort((a, b) => {\n    return sortAttribute(b) - sortAttribute(a)\n  })\n  .slice(0, 20)\n  .reverse()\n  .map(a => {\n    return {\n      ...a,\n      totalProjectValueInMillion: a['totalProjectValue'] / 1e6\n    }\n  })\n\nconst CompanyRanking = () => {\n    const [valueKey, setValueKey] = useState('totalProjects')\n\n\n    const [viz, setViz] = useState({})\n\n    useEffect(()=> {\n      const ak = valueKey === \"totalProjectValueInMillion\" ? `value` : `count`\n      const normalizer = valueKey === \"totalProjectValueInMillion\" ? 1e6 : 1\n\n      const data = sortedCompany.map( a => {\n        return {\n          label: `${a.corporate_name} (เฉพาะเจาะจง: ${a.methodStats['เฉพาะเจาะจง'][ak]/normalizer})`,\n          value: a[valueKey]\n        }\n      })\n\n      const obj = BarChart({\n        name: 'company-ranking',\n        data,\n        filterRx: dairyCompanyFilter\n      })\n\n      if(viz && viz.reset){\n        viz.reset()\n      }\n\n      setViz(obj)\n    }, [valueKey])\n\n    useEffect( () => {\n      if(viz && viz.display){\n        viz.display()\n      }\n    }, [viz])\n\n    return <div>\n      <div style={{marginTop: \"0rem\"}}>\n        <div css={{\n          textAlign: \"center\",\n          fontSize: \"11px\",\n          [media(DESKTOP_MIN_WIDTH)] : {\n            textAlign: \"right\",\n          }\n        }}>\n          <div css={{\n            fontWeight: \"bold\",\n            [media(DESKTOP_MIN_WIDTH)] : {\n              float: \"left\"\n            }\n          }}>\n            เรียงตามจำนวนโครงการจัดซื้อจัดจ้างแบบเฉพาะเจาะจง\n          </div>\n          หน่วย: <select\n            style={{\n                border: \"0px\",\n                background: \"#eee\",\n            }}\n            value={valueKey}\n            onChange={(e) => {\n              console.log(e.target.value)\n              setValueKey(e.target.value)\n            }}\n          >\n            <option value=\"totalProjects\">จำนวนโครงการทั้งหมด</option>\n            <option value=\"totalProjectValueInMillion\">มูลค่าโครงการรวม​ (ล้านบาท)</option>\n          </select>\n        </div>\n        <RD3Component data={viz.node}/>\n      </div>\n    </div>\n}\n\nexport default CompanyRanking","import React, {useEffect, useState} from \"react\"\n\nimport rd3 from 'react-d3-library'\n\nimport BarChart from \"../../d3-components/barchart\"\nimport authorityProfiles from \"../../data/local_authority_stats\"\nimport { DESKTOP_MIN_WIDTH, media } from \"../../shared/style\"\n\nconst RD3Component = rd3.Component\n\n\nconst methodSortKey = 'เฉพาะเจาะจง'\n\n\nconst sortAttribute = a => {\n  if(!a.methodStats[methodSortKey]){\n    return 0\n  } else{\n    return a.methodStats[methodSortKey].count\n  }\n}\n\nconst sortedCompany = authorityProfiles.sort((a, b) => {\n    return sortAttribute(b) - sortAttribute(a)\n  })\n  .reverse()\n  .slice(0, 10)\n  .map(a => {\n    return {\n      ...a,\n      totalProjectValueInMillion: a['totalProjectValue'] / 1e6\n    }\n  })\n\nconst AuthorityRanking = () => {\n    const [valueKey, setValueKey] = useState('totalProjects')\n\n    const [viz, setViz] = useState({})\n\n    useEffect(()=> {\n      const ak = valueKey === \"totalProjectValueInMillion\" ? `value` : `count`\n      const normalizer = valueKey === \"totalProjectValueInMillion\" ? 1e6 : 1\n\n      const data = sortedCompany.map( a => {\n        return {\n          label: `${a.dept_name}, ${a.province} (เฉพาะเจาะจง: ${a.methodStats['เฉพาะเจาะจง'][ak]/normalizer})`,\n          value: a[valueKey]\n        }\n      })\n\n      const obj = BarChart({\n        name: 'authority-ranking',\n        data,\n      })\n\n      if(viz && viz.reset){\n        viz.reset()\n      }\n\n      setViz(obj)\n    }, [valueKey])\n\n    useEffect( () => {\n      if(viz && viz.display){\n        viz.display()\n      }\n    }, [viz])\n\n    return <div>\n      <div style={{marginTop: \"0rem\"}}>\n        <div css={{\n          textAlign: \"center\",\n          fontSize: \"11px\",\n          [media(DESKTOP_MIN_WIDTH)] : {\n            textAlign: \"right\",\n          }\n        }}>\n           <div css={{\n            fontWeight: \"bold\",\n            [media(DESKTOP_MIN_WIDTH)] : {\n              float: \"left\"\n            }\n          }}>\n            เรียงตามจำนวนโครงการจัดซื้อจัดจ้างแบบเฉพาะเจาะจง\n          </div>\n          หน่วย: <select\n            style={{\n                border: \"0px\",\n                background: \"#eee\",\n            }}\n            value={valueKey}\n            onChange={(e) => {\n              setValueKey(e.target.value)\n            }}\n          >\n            <option value=\"totalProjects\">จำนวนโครงการทั้งหมด</option>\n            <option value=\"totalProjectValueInMillion\">มูลค่าโครงการรวม​ (ล้านบาท)</option>\n          </select>\n        </div>\n        <RD3Component data={viz.node}/>\n      </div>\n    </div>\n}\n\nexport default AuthorityRanking","import React from \"react\"\n\nimport * as variables from \"../shared/variables\"\n\nimport Placeholder from \"../components/placeholder\"\nimport CompanyInfo from \"../components/vis/company-info\"\nimport CreditPage from \"./credit\"\nimport CompanyDistribution from \"../components/vis/comparny-distribution\"\nimport MethodProfile from \"../components/vis/method-ranking\"\nimport CompanyRanking from \"../components/vis/company-ranking\"\nimport AuthorityRanking from \"../components/vis/autority-ranking\"\nimport ExternalLink from \"../components/external-link\"\nimport TextBox from \"../components/textbox\"\n\nimport utils from \"../utils\"\nimport { Link } from \"gatsby\"\nimport SEO from \"../components/seo\"\n\nrequire('typeface-kanit')\n\nconst Index = () => {\n    return <div\n            css={{\n                padding: \"10px\"\n            }}\n        >\n            <SEO title=\"หน้าแรก\"/>\n            <TextBox>\n                <h1\n                    css={{\n                        paddingTop: \"20vh\",\n                    }}\n                >{variables.header}</h1>\n                <div css={{fontSize: \"0.8em\"}}>\n                    <b>เขียนโดย: </b>{variables.teamMembers.join(', ')}\n                    <div css={{marginTop: \"5px\"}}>\n                        <b>วันที่: </b>{variables.date}\n                    </div>\n                    <b>หมายเหตุ: </b>1) {variables.content.remark}{\n                        utils.isMobile() && <span>\n                            ; 2) การแสดงผลบางส่วนอาจไม่สมบูรณ์บนจอขนาดเล็ก\n                        </span>\n                    }\n                </div>\n            </TextBox>\n            <br/>\n            <TextBox name=\"intro\">{variables.content.section1}</TextBox>\n            <TextBox name=\"รายละเอียดงบประมาณ อปท.\">{variables.content.section2}</TextBox>\n            <TextBox>\n                <img width=\"100%\" src=\"figures/total-project-value-summary.png\"/>\n            </TextBox>\n            <TextBox name=\"รูปแบบการจัดซื้อจัดจ้าง\">{variables.content.section3}</TextBox>\n            <TextBox>\n                <MethodProfile/>\n            </TextBox>\n            <TextBox name=\"บทสัมภาษณ์\"> {variables.content.section5}</TextBox>\n            <TextBox>\n                <Placeholder name=\"viz 3\" width=\"100%\" height=\"200px\"/>\n            </TextBox>\n            <TextBox name=\"อปท. เจาะจงมากสุด 5 แห่ง\">{variables.content.sectionEmpty}</TextBox>\n            <TextBox>\n                <AuthorityRanking/>\n            </TextBox>\n            <TextBox name=\"บริษัท ที่เจาะมากสุด 5 แห่ง\">บริษัทที่มีมูลค่าโครงการรวมทั้งหมดมากกว่า 100 ล้าน {variables.content.sectionEmpty}</TextBox>\n            <TextBox>\n                <CompanyRanking/>\n            </TextBox>\n            <TextBox name=\"การกระจายตัวของบริษัทในแต่ละภูมิภาค\">{variables.content.sectionEmpty}</TextBox>\n            <TextBox>\n                <CompanyDistribution/>\n            </TextBox>\n            <TextBox name=\"ลองสุ่มดูบริษัทอื่นๆ ที่มี รายได้มากกว่า 100 บาท\"> {variables.content.sectonCompanyProfile}</TextBox>\n            <TextBox>\n                <CompanyInfo/>\n            </TextBox>\n            <TextBox name=\"บทสรุป\">\n                {variables.content.sectionConclusion}\n            </TextBox>\n            <TextBox>\n                <b>เนื้อหาเพิ่มเติม</b>\n                <ol>\n                    <li>\n                        <ExternalLink name=\"ชุดข้อมูลโครงการจัดซื้อจ้างของอปท. ที่ใช้ในการวิเคราะห์\" url=\"https://github.com/codeforthailand/2019-local-administrative-budget-and-projects#ชุดข้อมูล\"/>\n                    </li>\n                    <li>\n                        <Link  css={{color: \"black\" }} to=\"/reflection-on-our-open-data\">\n                            อุปสรรคในการทำงานและการเข้าถึง “ข้อมูลเปิดภาครัฐ” (Open Government Data)\n                        </Link>\n                    </li>\n                </ol>\n                <div>\n                </div>\n                <CreditPage/>\n            </TextBox>\n        </div>\n}\n\nexport default Index"],"sourceRoot":""}